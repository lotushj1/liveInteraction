# 快速開始指南

## ⚡ 5 分鐘開始測試

### 步驟 1: 安裝依賴

```bash
cd load-testing
npm install
```

### 步驟 2: 配置環境變量

1. 複製環境變量模板：
```bash
cp .env.example .env
```

2. 編輯 `.env` 文件，填入你的 Supabase 配置：

```env
VITE_SUPABASE_URL=https://your-project-id.supabase.co
VITE_SUPABASE_PUBLISHABLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
TEST_EVENT_ID=your-test-event-id-here
```

> **如何獲取這些資訊？**
> 1. 登入 [Supabase Dashboard](https://supabase.com/dashboard)
> 2. 選擇你的專案
> 3. 前往 **Settings** → **API**
> 4. 複製 **Project URL** 和 **anon/public key**

> **如何獲取 Event ID？**
> 1. 在你的 LiveInteraction 應用中創建一個測試活動
> 2. 從 URL 或數據庫中獲取該活動的 ID
> 3. 填入 `.env` 文件

### 步驟 3: 運行第一個測試

```bash
# 方式 1: 使用互動式選擇器（推薦新手）
npm start

# 方式 2: 直接運行微型測試（5 用戶）
npm run test:micro

# 方式 3: 運行輕量測試（10 用戶）
npm run test:light
```

### 步驟 4: 查看測試結果

測試完成後，你會看到：

```
========================================
📊 測試報告
========================================

測試摘要:
  總測試時間: 30.45 秒
  總用戶數: 5
  成功連接: 5 (100.00%)
  失敗連接: 0 (0.00%)

性能指標:
  平均連接時間: 245.60 ms
  最快連接時間: 198 ms
  最慢連接時間: 312 ms
  總發送消息數: 125
  總接收消息數: 98
  總 Presence 更新: 45
  總錯誤數: 0

並發性能:
  每秒消息吞吐量: 7.32
  每用戶平均消息數: 44.60

結論與建議:
  ✅ 優秀! 系統可以穩定支持 5 個並發用戶
  💡 建議: 可以嘗試更高的並發數進行壓力測試

推薦並發容量評估:
  - 安全並發數: 5 用戶
  - 最大並發數: 7 用戶 (預估)
```

## 📈 逐步增加並發測試

按照這個順序逐步測試，找出你的系統容量：

```bash
# 1. 微型測試 (5 用戶)
npm run test:micro

# 2. 輕量測試 (10 用戶)
npm run test:light

# 3. 中等測試 (25 用戶)
npm run test:medium

# 4. 重度測試 (50 用戶)
npm run test:heavy

# 5. 壓力測試 (100 用戶)
npm run test:stress
```

> **何時停止？**
> - 當成功率低於 95% 時
> - 當錯誤率高於 5% 時
> - 當連接時間超過 1000ms 時

## 🎯 理解測試結果

### ✅ 系統正常（可以繼續增加並發）

- 成功連接率: 99-100%
- 平均連接時間: < 500ms
- 錯誤數: 0
- 測試過程流暢無卡頓

### ⚠️ 接近容量上限（謹慎增加）

- 成功連接率: 95-99%
- 平均連接時間: 500-1000ms
- 少量錯誤出現
- 偶爾出現延遲

### ❌ 超出容量（需要優化或降低並發）

- 成功連接率: < 95%
- 平均連接時間: > 1000ms
- 大量錯誤
- 測試過程頻繁卡頓

## 🔧 常見問題

### Q1: 測試報錯 "請在 .env 文件中設置..."

**解決方案:**
- 確保已創建 `.env` 文件（不是 `.env.example`）
- 確保填寫了所有必要的環境變量
- 檢查環境變量格式是否正確

### Q2: 所有連接都失敗

**檢查清單:**
- [ ] Supabase URL 是否正確？
- [ ] API Key 是否正確？
- [ ] Event ID 是否存在？
- [ ] 網絡連接是否正常？
- [ ] Supabase 專案是否已暫停？（Free plan 會自動暫停）

### Q3: 部分連接失敗

**可能原因:**
- 達到 Supabase 並發限制
- 網絡不穩定
- 測試並發數過高

**解決方案:**
- 降低測試並發數
- 檢查 Supabase 計劃限制
- 優化應用配置

### Q4: 測試卡住不動

**解決方案:**
1. 按 `Ctrl + C` 停止測試
2. 降低並發用戶數
3. 增加 `rampUpTime` 和 `activityInterval`
4. 重新運行測試

## 📊 建議測試流程

### 首次測試（30 分鐘）

```bash
# 1. 安裝和配置（10 分鐘）
npm install
cp .env.example .env
# 編輯 .env 文件

# 2. 基礎測試（5 分鐘）
npm run test:micro

# 3. 中等測試（10 分鐘）
npm run test:medium

# 4. 檢視報告（5 分鐘）
cd reports
ls -lt  # 查看最新的報告
cat load-test-report-*.json  # 查看詳細數據
```

### 完整評估（2-3 小時）

```bash
# 運行批量測試（自動測試多個場景）
npm run test:batch
```

這會自動運行：
- 10 用戶測試
- 25 用戶測試
- 50 用戶測試
- 100 用戶測試

並生成對比報告。

## 🎓 下一步

測試完成後：

1. **查看詳細文檔**: 閱讀 `README.md` 了解更多功能
2. **容量規劃**: 查看 `CAPACITY_GUIDE.md` 了解如何評估系統容量
3. **優化系統**: 根據測試結果優化你的應用
4. **定期測試**: 建立定期測試機制，監控系統性能

## 💡 小技巧

1. **保存測試報告**: reports/ 目錄下的所有報告都保留，方便對比
2. **測試前準備**: 確保測試環境穩定，避免其他程序占用資源
3. **真實模擬**: 盡量模擬真實使用場景（用戶行為、網絡環境等）
4. **多次測試**: 每個級別至少測試 2-3 次，取平均值更準確

---

準備好了嗎？開始你的第一個測試吧！🚀

```bash
npm start
```
